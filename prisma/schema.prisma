// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id          String       @id @default(uuid())
  firstName   String
  lastName    String
  email       String       @unique
  phoneNumber String       @unique
  idNumber    String
  password    String
  virtualBalance Float @default(0)
  tokens      Token[]
  autoMobiles AutoMobile[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

enum TokenType {
  PASSWORD_RESET
}

model Token {
  id                String    @id @default(uuid())
  hashedToken       String
  hashedTokenExpire BigInt
  name              TokenType @default(PASSWORD_RESET)

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, name])
  @@index([userId])
}

enum AutoMobileTypes {
  MINIVAN
  VEHICLE
  MICROCAR
  SEDAN
  HATCHBACK
  COUPE
  VAN
  HEV
  ELECTRIC_CAR
  CROSSOVER
}

model AutoMobile {
  id                          String          @id @default(uuid())
  name                        String          
  vehicleIdentificationNumber String
  type                        AutoMobileTypes @default(SEDAN)
  brand                       String          @db.Text
  modelYear                   String
  color                       String
  userId                      String
  user                        User            @relation(fields: [userId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@index([userId])
  @@unique([userId,name])
}


model Admin {
  id String @id @default(uuid())
  uuid String
  password String

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}